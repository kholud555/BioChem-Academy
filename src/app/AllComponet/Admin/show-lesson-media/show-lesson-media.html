<div class="lesson-media-page">
  <!-- Header Section -->
  <div class="header-section mb-5">
    <div class="d-flex align-items-center gap-3 mb-3">
      <div class="icon-badge">
        <span>üé•</span>
      </div>
      <div>
        <h2 class="mb-1 header-title">Lesson Media</h2>
        <p class="text-muted mb-0">Explore your lesson content</p>
      </div>
    </div>
    <h3 class="lesson-name">{{ lessonName }}</h3>
  </div>

  <!-- Media Container -->
  <div class="lesson-media-container">
    <div class="row g-4">
      <!-- Video Card -->
      <div *ngFor="let media of lessonMedia" [ngClass]="'col-md-6 col-lg-' + (media.mediaType.toLowerCase() === 'video' ? '12' : '6')">
        <div class="media-card-wrapper" [ngClass]="'media-' + media.mediaType.toLowerCase()">
          
          <!-- Video Media -->
          <div *ngIf="media.mediaType.toLowerCase() === 'video'" class="video-container">
            <div class="video-wrapper">
              <video 
                class="media-content"
                controls
                controlsList="nodownload noremoteplayback"
                disablePictureInPicture
                (contextmenu)="disableRightClick($event)"
                [src]="media.previewUrl">
              </video>
              <div class="video-overlay">
                <span class="badge badge-primary">Video</span>
              </div>
            </div>
          </div>

          <!-- Image Media -->
          <div *ngIf="media.mediaType.toLowerCase() === 'image'" class="image-container">
            <div class="image-wrapper position-relative overflow-hidden">
              <img 
                class="media-content"
                [src]="media.previewUrl"
                [alt]="media.fileName"
                draggable="false"
                (contextmenu)="disableRightClick($event)"/>
              <div class="image-overlay">
                <span class="badge badge-success">Image</span>
              </div>
            </div>
          </div>

          <!-- Audio Media -->
          <div *ngIf="media.mediaType.toLowerCase() === 'audio'" class="audio-container">
            <div class="audio-wrapper p-4">
              <div class="audio-icon mb-3">
                <i class="bi bi-music-note-beamed"></i>
              </div>
              <p class="audio-filename mb-3">{{ media.fileName }}</p>
              <audio 
                class="w-100 audio-player"
                controls 
                controlsList="nodownload noremoteplayback"
                (contextmenu)="disableRightClick($event)"
                [src]="media.previewUrl">
              </audio>
              <div class="audio-badge">
                <span class="badge badge-info">Audio</span>
              </div>
            </div>
          </div>

          <!-- Card Footer -->
          <div class="card-footer-info">
            <small class="text-muted">{{ media.fileName }}</small>
            <div class="media-actions">
              <button class="btn-action" title="Download">
                <i class="bi bi-download"></i>
              </button>
              <button class="btn-action" title="Share">
                <i class="bi bi-share"></i>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Empty State -->
      <div *ngIf="!lessonMedia || lessonMedia.length === 0" class="col-12">
        <div class="empty-state">
          <div class="empty-icon">üì≠</div>
          <h5>No Media Yet</h5>
          <p class="text-muted">This lesson doesn't have any media content yet.</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- 

<div class="exams-section mt-5" *ngIf="exams.length > 0">
  <h3 class="mb-4">üìù Available Exams</h3>

  <div class="row g-4">
    <div *ngFor="let exam of exams" class="col-md-6 col-lg-4">
      <div class="card exam-card h-100 shadow-sm">
        <div *ngIf="studentResults.length > 0">
          <div *ngFor="let result of studentResults" class="card mb-3 p-3 shadow-sm">
            <h5>{{ result.examTitle }}</h5>
            <p>Score: {{ result.score }} / {{ result.totalQuestions }}</p>
            <p *ngIf="result.submittedAt">Submitted At: {{ result.submittedAt | date:'short' }}</p>
          </div>
        </div>
        <div class="card-body d-flex flex-column justify-content-between">
          <h5 class="card-title">{{ exam.title }}</h5>
          <p class="card-text text-muted mb-3">Test your knowledge and skills! üéØ</p>
          <button class="btn btn-primary w-100"
                  [disabled]="studentSubmittedExams.includes(exam.id)"
                  (click)="startExam(exam.id, exam.title)">
            {{ studentSubmittedExams.includes(exam.id) ? 'Already Taken' : 'Start Exam' }}
          </button>
        </div>
      </div>
    </div>
  </div>
</div>


<div *ngIf="ExamStarted" class="exam-questions mt-4">
  <h4>{{ selectedExamTitle }}</h4>

  <div *ngFor="let question of examQuestions" class="card mb-3 p-3">
    <p><strong>{{ question.questionHeader.questionHeader }}</strong> ({{ question.mark }} pts)</p>

    <ul class="list-group">
      <li *ngFor="let choice of question.choicesOfQuestion" class="list-group-item">
        <input type="radio"
               [name]="'q' + question.id"
               [value]="choice.id"
               (change)="selectAnswer(question.id, choice.id)"
               [checked]="examAnswers[question.id] === choice.id"/>
        {{ choice.choiceText }}
      </li>
    </ul>
  </div>

  <button class="btn btn-success" (click)="submitExam()" [disabled]="submitting">
    {{ submitting ? 'Submitting...' : 'Submit Exam' }}
  </button>
</div>


<div *ngIf="showResult" class="exam-result mt-4 alert alert-info">
  <h4>Result</h4>
  <p>Total Score: {{ totalScore }} / {{ maxScore }}</p>
  <p>Percentage: {{ getPercentage() }}%</p>
  <button class="btn btn-secondary" (click)="closeResult()">Close</button>
</div> -->
