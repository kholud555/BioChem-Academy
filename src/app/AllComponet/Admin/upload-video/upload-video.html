<div class="upload-form">

  <!-- Subject -->
  <div>
    <label>ğŸ“š Subject</label>
    <select [(ngModel)]="selectedSubjectId" (ngModelChange)="onSubjectChange($event)">
      <option [value]="null">Select Subject</option>
      <option *ngFor="let sub of subjects" [value]="sub.id">{{ sub.subjectName }}</option>
    </select>
  </div>

  <!-- Grade -->
  <div>
    <label>ğŸ« Grade</label>
    <select [(ngModel)]="selectedGradeId" (ngModelChange)="onGradeChange($event)" [disabled]="!selectedSubjectId">
      <option [value]="null">Select Grade</option>
      <option *ngFor="let grade of grades" [value]="grade.id">{{ grade.gradeName }}</option>
    </select>
  </div>

  <!-- Term -->
  <div>
    <label>ğŸ“˜ Term</label>
    <select [(ngModel)]="selectedTermId" (ngModelChange)="onTermChange($event)" [disabled]="!selectedGradeId">
      <option [value]="null">Select Term</option>
      <option *ngFor="let term of terms" [value]="term.id">
        {{ term.termOrder === 0 ? 'First Term' : 'Second Term' }}
      </option>
    </select>
  </div>

  <!-- Unit -->
  <div>
    <label>ğŸ“– Unit</label>
    <select [(ngModel)]="selectedUnitId" (ngModelChange)="onUnitChange($event)" [disabled]="!selectedTermId">
      <option [value]="null">Select Unit</option>
      <option *ngFor="let unit of units" [value]="unit.id">{{ unit.title }}</option>
    </select>
  </div>

  <!-- Lesson -->
  <div>
    <label>ğŸ“‚ Lesson</label>
    <select [(ngModel)]="selectedLessonId" (ngModelChange)="onLessonChange($event)" [disabled]="!selectedUnitId">
      <option [value]="null">Select Lesson</option>
      <option *ngFor="let lesson of lessons" [value]="lesson.id">{{ lesson.title }}</option>
    </select>
  </div>

</div>

<!-- ğŸŸ¦ Upload Area -->
<div
  class="upload-area"
  [class.drag-active]="dragActive"
  (dragenter)="handleDrag($event, 'enter')"
  (dragover)="handleDrag($event, 'over')"
  (dragleave)="handleDrag($event, 'leave')"
  (drop)="handleDrop($event)"
>
  <p>ğŸ¬ Drag & drop your video here or <span class="browse">choose a file</span></p>
  <input type="file" accept="video/*,image/*,application/pdf" (change)="onFileChange($event)" />
</div>

<!-- ğŸ“ File Info -->
<div *ngIf="selectedFile" class="file-info">

  <p>ğŸ“ {{ selectedFile.name }} ({{ formatFileSize(selectedFile.size) }})</p>

  <div class="buttons">
    <button class="upload-btn" (click)="handleUpload()" [disabled]="isUploading || !selectedLessonId">
      â¬†ï¸ Upload
    </button>

    <button class="remove-btn" (click)="handleRemove()">ğŸ—‘ Remove</button>
  </div>

  <div *ngIf="isUploading" class="progress-section">
    <p>Uploading: {{ uploadProgress }}%</p>
    <progress [value]="uploadProgress" max="100"></progress>
  </div>

</div>
