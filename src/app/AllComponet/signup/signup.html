<div class="signup-container">
  <div class="floating-circle circle-1"></div>
  <div class="floating-circle circle-2"></div>
  <div class="floating-circle circle-3"></div>

  <form class="signup-form mt-5" [formGroup]="RegisterForm" (ngSubmit)="onSubmit()">
    <h2 class="text-center mb-4">Sign up</h2>

    <!-- Name -->
    <div class="form-group">
      <label for="name">Name</label>
      <input type="text" id="name" placeholder="Full Name" formControlName="userName" />
      <div *ngIf="f['userName'].touched && f['userName'].invalid" class="error-message">
        <div *ngIf="f['userName'].errors?.['required']">Name is required.</div>
        <div *ngIf="f['userName'].errors?.['maxlength']">Name must be 20 characters or less.</div>
      </div>
    </div>

    <!-- Student Phone -->
    <div class="form-group">
      <label for="studentPhone">Student Phone Number</label>
      <input type="text" id="studentPhone" placeholder="01xxxxxxxxx" formControlName="phoneNumber" />
      <div *ngIf="f['phoneNumber'].touched && f['phoneNumber'].invalid" class="error-message">
        Phone number is required and must be valid.
      </div>
    </div>

    <!-- Parent Phone -->
    <div class="form-group">
      <label for="parentPhone">Parent Phone Number</label>
      <input type="text" id="parentPhone" placeholder="01xxxxxxxxx" formControlName="parentPhone" />
      <div *ngIf="f['parentPhone'].touched && f['parentPhone'].invalid" class="error-message">
        Parent phone is required and must be valid.
      </div>
      <div *ngIf="RegisterForm.hasError('samePhone')" class="error-message">
        Parent phone must be different from student phone
      </div>
    </div>

    <!-- Grade Dropdown -->
   <div class="form-group">
  <label for="grade">Grade</label>
  <select id="grade" formControlName="grade" (change)="onGradeChange($event)">
    <option value="" disabled selected>Select Grade</option>
    <option *ngFor="let g of grades" [value]="g.gradeName">{{ g.gradeName }}</option>
  </select>
</div>



    <!-- Email -->
    <div class="form-group">
      <label for="email">E-mail</label>
      <input type="email" id="email" placeholder="your@gmail.com" formControlName="email" />
      <div *ngIf="f['email'].touched && f['email'].invalid" class="error-message">
        A valid email is required.
      </div>
    </div>

    <!-- Password -->
    <div class="form-group">
      <label>Password</label>
      <div class="password-wrapper position-relative">
        <input [type]="showPassword ? 'text' : 'password'" placeholder="Enter your password" formControlName="password" />
        <button type="button" (click)="togglePassword()">
           <i class="bi" [class.bi-eye-slash]="showPassword" [class.bi-eye]="!showPassword"></i>
        </button>
      </div>
      <div *ngIf="f['password'].touched && f['password'].invalid" class="error-message">
        Password is required (min 6 chars, must include uppercase, number & special char)
      </div>
    </div>

    <!-- Confirm Password -->
    <div class="form-group">
      <label>Confirm Password</label>
      <div class="password-wrapper position-relative">
        <input [type]="showConfirmPassword ? 'text' : 'password'" placeholder="Confirm password" formControlName="confirmPassword" />
        <button type="button" (click)="toggleConfirmPassword()">
            <i class="bi" [class.bi-eye-slash]="showConfirmPassword" [class.bi-eye]="!showConfirmPassword"></i>
        </button>
      </div>
      <div *ngIf="f['confirmPassword'].touched && f['confirmPassword'].invalid" class="error-message">
        Confirm password is required
      </div>
      <div *ngIf="RegisterForm.hasError('passwordMismatch')" class="error-message">
        Confirm password must match password
      </div>
    </div>

    <button type="submit" class="btn-submit">Sign up</button>
    <p class="mt-2">
      Already Have Account
      <a style="color: var(--primary-teal); cursor: pointer;" (click)="GoLogin()">Login</a>
    </p>
  </form>
</div>
